

<html>
    <div>Hello, this is a index page!!!</div>
    <br/>
    <div>
        <a href="#" id="req-more-btn">Request More</a>
    </div>
    <br/>
    <div>
        <a href="#" id="logout-btn">Log out</a>
    </div>
    <br/>
    <div>
        <a href="#" id="gl-btn">get group list</a>
        <div id='gl'></div>
    </div>
</html>

<script>
    // let accessToken = ''
    function renderGroups(parent, array) {
        array.forEach(function (o) {
            var li = document.createElement("li"),
                ul;

            li.textContent = `${o.name}, ${o.id}`;
            parent.appendChild(li);
            if (o.nest) {
                ul = document.createElement("ul");
                li.appendChild(ul);
                renderGroups(ul, o.nest);
            }
        });
    }

    window.fbAsyncInit = function() {
      FB.init({
        appId            : '720037978808045',
        // autoLogAppEvents : true,
        xfbml            : true,
        version          : 'v7.0'
      });
    };

    const scop = [
        'email',
        'publish_video',
        'publish_to_groups',
        'groups_access_member_info'
    ]
    document.getElementById('req-more-btn').onclick = function() {
        FB.login(function(response) {
            console.log('FB.login response', response);
            // accessToken = response.authResponse.accessToken
        }, {
            scope: scop.join(','),
            return_scopes: true
        });

        return false;
    }

    document.getElementById('logout-btn').onclick = function() {
        FB.logout(function(response) {
            console.log('FB.logout response', response);
        }, { access_token: accessToken });

        return false;
    }

    document.getElementById('gl-btn').onclick = function() {
        FB.api('/me?fields=id,email,groups{member_count,owner,name}', (resp) => {
            renderGroups(document.getElementById('gl'), resp.groups.data)
            // document.getElementById('gl').innerHTML = resp
        });

        return false;
    }
</script>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js"></script>